# linux 基础

## 切换中文包

```bash
locale -a
看看有没有zh_CN.utf-8
如果有
vim /etc/locale.conf
改成
zh_CN.utf-8
然后重启系统
reboot
```

## 常见目录介绍

- / 根目录
- /root root 用户的家目录
- /home/username 普通用户的家目录
- /etc 配置文件目录
- /bin 命令目录
- /sbin 管理命令目录
- /usr/bin /usr/sbin 系统预装的其他命令

## 查看当前目录文件

- -l 详细
- -h 文件大小用单位展示 xxxMB

```bash
ls -lh
```

## 进入 xx 文件夹

- 绝对路径 /root/xxx
- 相对路径 ../xxx/

```bash
cd xxx

cd ..
cd ./xx/
```

## 创建和删除

### 创建

```bash
mkdir xx 创建文件夹
touch xx 创建文件
```

### 删除

```bash
rm xx 会有提示 y代表确定删除
rm -r 递归删除
rm -f 强制删除 也就是不提示
rm -rf * 递归删除所有 此操作很危险
```

### 复制和移动

```bash
cp 复制
mv 移动
```

## 查看文件内容

### 普通查看

```bash
cat xxx.log
```

### 查看文件前 10 行

```bash
head -n 10 xxx.log
head -10 xxx.log
```

### 查看文件尾 10 行

```bash
tail -n 10 xxx.log
tail -f xxx.log 持续查看 监控文件变化
```

## 解压缩文件

- 打包和压缩是两个操作, 打包不是压缩
- 用的都是 tar 命令
- -c 打包
- -z gz 压缩
- -j bz2 压缩
- -x 解包

### 打包

```bash
tar -cf [路径/文件名] [打包目标路径]
```

- c 代表 create f 代表文件 意思就是打包成文件

### 打包用 gz 压缩

```bash
tar -czf [路径/文件名] [打包目标路径]
```

- 一般文件命名都是 .tar.gz 后缀

### 打包用 bz2 压缩

```bash
tar -cjf [路径/文件名] [打包目标路径]
```

- 一般文件命名都是 .tar.bz2 后缀

- gz 压缩快, 比例没 bz2 高
- bz2 压缩比例高, 时间慢

### 解包

```bash
tar -xf 包 -C 解压到哪里
```

### 解包并解压缩

```bash
tar -zxf 包 -C 解压到哪里
```

- 注意网上有.tbz2 或 .tgz 其实是.tar.bz2 和.tar.gz 的缩写

## 编辑文件

> vim 是 vi 的升级版

```bash
vim xxx.log
```

### 正常模式

- h 向左移动光标
- l 向右移动光标
- z 向下
- k 向上
- y 复制 yy 复制当前行 y$复制到结尾
- d 剪切 同上
- p 粘贴
- u 撤销
- ctrl + r 重做 (撤销后按这个取消撤销)
- x 删除
- r 替换当前字符
- G 移动到文本最后一行 (11 G 这样则表示 移动到 11 行)
- g 移动到第一行
- $ 移动到本行最后
- ^ 移动到本行开头

### 插入模式

正常模式中，按 i o a I O A 都能进入插入模式

- i 光标在当前位置
- o 光标会换行
- a 光标会往后一位
- A 光标会在当前行最后面
- I 光标会在当前行最前面
- O 光变往上换行

### 命令模式 (冒号模式)

正常模式中 按 :
退出按 esc 一次或两次

- :set nu 显示行号
- :w 保存 (w 路径) 代表保存在哪
- :q 退出 q! 强制退出不保存
- :wq 保存退出 wq!表示强制
- :x 退出或保存退出 跟 wq 区别就是没修改不会改变文件更新时间
- :! 执行 linux 命令 例如 :!ls -l
- :/3 查找为 3 的字符 按 n 往下一移动找 shift n 往上一个移动找
- :s/old/new 查找替换 针对光标所在行 :%s 代表整个文件 /g 代表所有都替换不然只会替换一个 3,5s 代表 3 到 5 行

### 可视模式

正常模式中 按 v

- shift + v 当前行模式
- ctrl + v 块模式

## 用户管理

### 新增用户

```bash
useradd xx
```

### 删除用户

```bash
userdel xx 加上-r代表把home目录的用户文件夹同时删
```

### 修改用户密码

```bash
passwd xx
```

### 修改用户属性

```bash
usermod xx
chage xx
```

### 切换用户

```bash
su xx
```

### 以 root 用户身份执行命令

需要使用 sudo 用户组

```bash
sudo xx
```

## 文件与目录权限

### chmod

数字代表

- x 1 执行
- w 2 写入
- r 4 读取

用数字操作

比如 777

- 第一位代表所属用户权限
- 第二位代表所属组权限
- 第三位代表其他人权限

```bash
chmod 777 xxx 设置最高权限 1+2+4=7 xwr
```

操作所属用户权限

```bash
chmod u=wrx xxx 设置权限
chmod u-w xxx 减
chmod u+r xxx 增
```

操作组权限 (group 组)  
把上面的 u 改成 g

操作其他人权限 (other 其他人)  
把上面的 u 改成 o

操作以上所有权限 (all)  
把上面的 u 改成 a

### chown

```bash
chown [user] xxx 单独设置文件所属用户
chown :[group] xxx 单独设置组
chown [user]:[group] xxx 设置所属用户和组
例: chown root:root xxx 设置xxx文件为root用户和root组
```

### chgrp 不常用

### SUID

- 用于二进制可执行文件，执行命令时取得文件属主权限
- 如 /usr/bin/passwd

### SGID

- 用于目录，在该目录下创建新的文件和目录，权限自动更改为该目录的属组

### SBIT

- 用于目录，该目录下新建的文件和目录，仅 root 和自己可以删除
- 如 /tmp

## 网络管理
